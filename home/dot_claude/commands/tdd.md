---
allowed-tools: Bash, Read, Write, Edit, Glob, Grep
description: プランモードを終了してTDDワークフローで実装を進める
---

## コンテキスト

- 現在のgitステータス: !`git status`
- 現在のブランチ: !`git branch --show-current`
- テストファイル: !`find . -name "test_*.py" -o -name "*_test.py" -o -name "tests.py" 2>/dev/null | head -20`

## タスク

プランモードを終了して、テスト駆動開発（TDD）を使用して実装を進めます。

### ステップ1: プランモードの終了

現在プランモードにいる場合は、ExitPlanModeツールを使用して今すぐ終了してください。実装の続行についてユーザーの承認を得ています。

### ステップ2: TDDワークフローに従う

`/tdd-workflow`スキルの原則を適用:

1. **RED** - まず失敗するテストを書く
2. **GREEN** - テストを通過する最小限のコードを書く
3. **REFACTOR** - テストを通過させたままコードを改善

### ステップ3: カバレッジの確認

実装後、80%以上のテストカバレッジを確認:

```bash
uv run pytest --cov=src --cov-report=term-missing
```

## TDDサイクルのリマインダー

```
┌─────────────────────────────────────────────┐
│  RED → GREEN → REFACTOR → 繰り返し           │
│                                             │
│  1. テストを書く（失敗を期待）               │
│  2. テストを実行（失敗を確認）               │
│  3. 最小限のコードを書く                     │
│  4. テストを実行（通過を確認）               │
│  5. 必要に応じてリファクタリング             │
│  6. カバレッジ ≥ 80% を確認                  │
└─────────────────────────────────────────────┘
```

## 制約

- 実装コードの前にテストを書くこと
- 各テストは1つの振る舞いに焦点を当てること
- テストされている内容を説明する説明的なテスト名を使用すること
- 外部依存関係はモックすること
- エッジケースとエラーパスをテストすること

---

## 参照

### スキル
- [`/tdd-workflow`](../skills/tdd-workflow/SKILL.md) - TDDワークフローの原則とパターン
